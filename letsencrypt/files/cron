# /etc/cron.d/certbot: crontab entries for the certbot package
#
# This file is managed by salt-minion(1), manual changes may get overwritten!
#
# Upstream recommends attempting renewal twice a day
#
# Eventually, this will be an opportunity to validate certificates
# haven't been revoked, etc.  Renewal will only occur if expiration
# is within 30 days.
#
# This cron job will do nothing if we are running systemd. In that case,
# certbot service and timer is used instead.
#
SHELL=/bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin

0 */12 * * * root test -x $(which certbot) -a \! -d /run/systemd/system && perl -e 'sleep int(rand(3600))' && certbot -q renew {% if client.hook %}--deploy-hook /usr/local/lib/certbot/hooks/deploy-hook{% endif %}
